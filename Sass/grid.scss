@mixin new-grid($numberofproducts, $gutters) {
  $margin: 0;
  @if $numberofproducts > 1 {
    $margin: ($numberofproducts - 1) * $gutters;
  } @else {
    $margin: 0;
  }
  .product, .product:nth-child(n){
    display: inline-block;
    vertical-align: top;
    width: (100% - $margin) / $numberofproducts;
    margin: 0 -4px 3em #{$gutters + '%'};
  }
  .product:nth-child(#{$numberofproducts}n + 1){
    margin-left: 0;
  }
}

.main {
  @include new-grid(4, 1.5);
}